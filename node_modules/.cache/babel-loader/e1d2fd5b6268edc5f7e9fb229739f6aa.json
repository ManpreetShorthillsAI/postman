{"ast":null,"code":"var _jsxFileName = \"/home/shtlp_0172/Desktop/postman/postman_project/src/components/playground/URLBox.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { forwardRef, useContext, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport axios from 'axios';\nimport { Context } from '../../contexts/Store';\nimport { HistoryContext } from '../../contexts/History';\nimport styles from './playground.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.interceptors.request.use(request => {\n  request.customData = request.customData || {};\n  request.customData.startTime = new Date().getTime();\n  return request;\n});\n\nfunction updateEndTime(response) {\n  response.customData = response.customData || {};\n  response.customData.time = new Date().getTime() - response.config.customData.startTime;\n  return response;\n}\n\naxios.interceptors.response.use(updateEndTime, e => {\n  if (typeof e.response === 'undefined') {\n    const err = 'A network error occurred. This could be a CORS issue or a dropped internet connection.\\nOpen developer console to learn more.';\n    return Promise.reject(err);\n  }\n\n  return Promise.reject(updateEndTime(e.response));\n});\nconst AutoGrowInput = /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  const inputRef = useRef();\n  useImperativeHandle(ref, () => ({\n    focus() {\n      inputRef.current.focus();\n    }\n\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auto-grow-input\",\n    style: {\n      display: 'inline-grid',\n      alignItems: 'center',\n      justifyItems: 'start',\n      maxWidth: '500px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ref: inputRef,\n      placeholder: \"http://example.com\",\n      value: props.value,\n      onChange: event => props.onChange(event.target.value),\n      style: {\n        gridArea: '1 / 1 / 2 / 2',\n        width: '100%',\n        padding: 0,\n        border: 'none',\n        maxWidth: '600px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        gridArea: '1 / 1 / 2 / 2',\n        visibility: 'hidden'\n      },\n      children: props.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}, \"Ag7bjDUBywlCYPNfrolbitV68Mw=\", false, function () {\n  return [useImperativeHandle];\n}));\n_c2 = AutoGrowInput;\n\nconst URLBox = () => {\n  _s2();\n\n  const {\n    state,\n    dispatch\n  } = useContext(Context);\n  const {\n    dispatch: dispatchAPIEntry\n  } = useContext(HistoryContext);\n  const [url, setUrl] = useState(state.formData.url);\n  const [queryParams, setQueryParams] = useState(state.formData.params);\n  const [headers, setHeaders] = useState(null);\n  useEffect(() => {\n    let qp = state.formData.params;\n\n    if (state.authLocation === 'qp') {\n      const header = state.authHeader.split(':');\n\n      if (header.length === 2) {\n        qp = qp ? `${qp}&${header[0]}=${header[1]}` : `${header[0]}=${header[1]}`;\n      }\n    } else {\n      qp = state.formData.params;\n    }\n\n    setQueryParams(qp);\n    let headerObject = {},\n        authHeader = {};\n\n    if (state.requestHeaders.length) {\n      headerObject = {};\n      state.requestHeaders.forEach(header => {\n        const {\n          key,\n          value\n        } = header;\n        headerObject[key] = value;\n      });\n    }\n\n    if (state.auth) {\n      authHeader = {};\n      const auth = state.authHeader.split(':');\n\n      if (state.authLocation === 'header') {\n        authHeader[auth[0]] = auth[1];\n      } else {\n        delete authHeader[auth[0]];\n      }\n    }\n\n    setHeaders({ ...headerObject,\n      ...authHeader\n    });\n  }, [state]);\n  const [method, setMethod] = useState(state.formData.method);\n  const [btnDisabled, setBtnDisabled] = useState(state.formData.url.length === 0);\n  const inputboxRef = useRef();\n\n  const handleChange = e => {\n    setBtnDisabled(e.length <= 0);\n    if (method === '') setMethod('GET');\n    dispatch({\n      type: 'SET_URL',\n      payload: e\n    });\n    setUrl(e);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!method || !url) return;\n    const fullUrl = queryParams ? `${url}${queryParams}` : url;\n\n    if (!state.responseUI) {\n      dispatch({\n        type: 'SET_RESPONSE_UI',\n        payload: true\n      });\n    }\n\n    dispatch({\n      type: 'SET_FORM_SUBMIT',\n      payload: {\n        method,\n        url,\n        params: state.formData.params,\n        payload: state.formData.payload\n      }\n    });\n    axios({\n      method,\n      url: fullUrl,\n      data: JSON.parse(state.formData.payload),\n      headers\n    }).catch(e => e).then(res => {\n      if (typeof res === 'string' || typeof res === 'undefined') {\n        dispatch({\n          type: 'SET_API_ERROR',\n          payload: res\n        });\n      } else {\n        dispatch({\n          type: 'SET_API_RESPONSE',\n          payload: res\n        });\n      }\n\n      const reqUrl = `${new Date().getTime()} : ${method} ${fullUrl}`;\n      dispatchAPIEntry({\n        type: 'ADD_NEW_ENTRY',\n        payload: reqUrl\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.url_box,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: method,\n        onChange: e => setMethod(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"GET\",\n          children: \"GET\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"POST\",\n          children: \"POST\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"PUT\",\n          children: \"PUT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"PATCH\",\n          children: \"PATCH\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"DELETE\",\n          children: \"DELETE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => {\n          inputboxRef.current.focus();\n        },\n        children: [/*#__PURE__*/_jsxDEV(AutoGrowInput, {\n          value: url,\n          ref: inputboxRef,\n          onChange: handleChange,\n          qp: queryParams\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: queryParams\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: btnDisabled || state.formSubmitted,\n        children: state.formSubmitted ? 'Sending...' : 'Send'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(URLBox, \"yNbX9lA3L5VzAI1F4yv+aWdTcIc=\");\n\n_c3 = URLBox;\nexport default URLBox;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"AutoGrowInput$forwardRef\");\n$RefreshReg$(_c2, \"AutoGrowInput\");\n$RefreshReg$(_c3, \"URLBox\");","map":{"version":3,"sources":["/home/shtlp_0172/Desktop/postman/postman_project/src/components/playground/URLBox.js"],"names":["forwardRef","useContext","useEffect","useImperativeHandle","useRef","useState","axios","Context","HistoryContext","styles","interceptors","request","use","customData","startTime","Date","getTime","updateEndTime","response","time","config","e","err","Promise","reject","AutoGrowInput","props","ref","inputRef","focus","current","display","alignItems","justifyItems","maxWidth","value","event","onChange","target","gridArea","width","padding","border","visibility","URLBox","state","dispatch","dispatchAPIEntry","url","setUrl","formData","queryParams","setQueryParams","params","headers","setHeaders","qp","authLocation","header","authHeader","split","length","headerObject","requestHeaders","forEach","key","auth","method","setMethod","btnDisabled","setBtnDisabled","inputboxRef","handleChange","type","payload","handleSubmit","preventDefault","fullUrl","responseUI","data","JSON","parse","catch","then","res","reqUrl","url_box","formSubmitted"],"mappings":"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","sourcesContent":["import {\n  forwardRef,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport axios from 'axios';\nimport { Context } from '../../contexts/Store';\nimport { HistoryContext } from '../../contexts/History';\nimport styles from './playground.module.css';\n\naxios.interceptors.request.use((request) => {\n  request.customData = request.customData || {};\n  request.customData.startTime = new Date().getTime();\n  return request;\n});\n\nfunction updateEndTime(response) {\n  response.customData = response.customData || {};\n  response.customData.time =\n    new Date().getTime() - response.config.customData.startTime;\n  return response;\n}\n\naxios.interceptors.response.use(updateEndTime, (e) => {\n  if (typeof e.response === 'undefined') {\n    const err =\n      'A network error occurred. This could be a CORS issue or a dropped internet connection.\\nOpen developer console to learn more.';\n    return Promise.reject(err);\n  }\n  return Promise.reject(updateEndTime(e.response));\n});\n\nconst AutoGrowInput = forwardRef((props, ref) => {\n  const inputRef = useRef();\n  useImperativeHandle(ref, () => ({\n    focus() {\n      inputRef.current.focus();\n    },\n  }));\n\n  return (\n    <div\n      className=\"auto-grow-input\"\n      style={{\n        display: 'inline-grid',\n        alignItems: 'center',\n        justifyItems: 'start',\n        maxWidth: '500px',\n      }}\n    >\n      <input\n        ref={inputRef}\n        placeholder=\"http://example.com\"\n        value={props.value}\n        onChange={(event) => props.onChange(event.target.value)}\n        style={{\n          gridArea: '1 / 1 / 2 / 2',\n          width: '100%',\n          padding: 0,\n          border: 'none',\n          maxWidth: '600px',\n        }}\n      />\n      <span\n        style={{\n          gridArea: '1 / 1 / 2 / 2',\n          visibility: 'hidden',\n        }}\n      >\n        {props.value}\n      </span>\n    </div>\n  );\n});\n\nconst URLBox = () => {\n  const { state, dispatch } = useContext(Context);\n  const { dispatch: dispatchAPIEntry } = useContext(HistoryContext);\n\n  const [url, setUrl] = useState(state.formData.url);\n  const [queryParams, setQueryParams] = useState(state.formData.params);\n  const [headers, setHeaders] = useState(null);\n\n  useEffect(() => {\n    let qp = state.formData.params;\n    if (state.authLocation === 'qp') {\n      const header = state.authHeader.split(':');\n      if (header.length === 2) {\n        qp = qp\n          ? `${qp}&${header[0]}=${header[1]}`\n          : `${header[0]}=${header[1]}`;\n      }\n    } else {\n      qp = state.formData.params;\n    }\n    setQueryParams(qp);\n\n    let headerObject = {},\n      authHeader = {};\n    if (state.requestHeaders.length) {\n      headerObject = {};\n      state.requestHeaders.forEach((header) => {\n        const { key, value } = header;\n        headerObject[key] = value;\n      });\n    }\n\n    if (state.auth) {\n      authHeader = {};\n      const auth = state.authHeader.split(':');\n      if (state.authLocation === 'header') {\n        authHeader[auth[0]] = auth[1];\n      } else {\n        delete authHeader[auth[0]];\n      }\n    }\n    setHeaders({ ...headerObject, ...authHeader });\n  }, [state]);\n\n  const [method, setMethod] = useState(state.formData.method);\n  const [btnDisabled, setBtnDisabled] = useState(\n    state.formData.url.length === 0\n  );\n\n  const inputboxRef = useRef();\n\n  const handleChange = (e) => {\n    setBtnDisabled(e.length <= 0);\n    if (method === '') setMethod('GET');\n    dispatch({ type: 'SET_URL', payload: e });\n    setUrl(e);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!method || !url) return;\n\n    const fullUrl = queryParams ? `${url}${queryParams}` : url;\n    if (!state.responseUI) {\n      dispatch({ type: 'SET_RESPONSE_UI', payload: true });\n    }\n    dispatch({\n      type: 'SET_FORM_SUBMIT',\n      payload: {\n        method,\n        url,\n        params: state.formData.params,\n        payload: state.formData.payload,\n      },\n    });\n    axios({\n      method,\n      url: fullUrl,\n      data: JSON.parse(state.formData.payload),\n      headers,\n    })\n      .catch((e) => e)\n      .then((res) => {\n        if (typeof res === 'string' || typeof res === 'undefined') {\n          dispatch({\n            type: 'SET_API_ERROR',\n            payload: res,\n          });\n        } else {\n          dispatch({\n            type: 'SET_API_RESPONSE',\n            payload: res,\n          });\n        }\n        const reqUrl = `${new Date().getTime()} : ${method} ${fullUrl}`;\n        dispatchAPIEntry({ type: 'ADD_NEW_ENTRY', payload: reqUrl });\n      });\n  };\n\n  return (\n    <div className={styles.url_box}>\n      <form onSubmit={handleSubmit}>\n        <select value={method} onChange={(e) => setMethod(e.target.value)}>\n          <option value=\"\">Select</option>\n          <option value=\"GET\">GET</option>\n          <option value=\"POST\">POST</option>\n          <option value=\"PUT\">PUT</option>\n          <option value=\"PATCH\">PATCH</option>\n          <option value=\"DELETE\">DELETE</option>\n        </select>\n        <div\n          onClick={() => {\n            inputboxRef.current.focus();\n          }}\n        >\n          <AutoGrowInput\n            value={url}\n            ref={inputboxRef}\n            onChange={handleChange}\n            qp={queryParams}\n          />\n          <span>{queryParams}</span>\n        </div>\n        <button type=\"submit\" disabled={btnDisabled || state.formSubmitted}>\n          {state.formSubmitted ? 'Sending...' : 'Send'}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default URLBox;\n"]},"metadata":{},"sourceType":"module"}